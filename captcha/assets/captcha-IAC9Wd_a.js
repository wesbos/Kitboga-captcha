(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();class f{constructor(){this.items=[],this.gameWon=!1,this.gameFailed=!1,this.gameStarted=!1,this.draggedItem=null,this.dragOffset={x:0,y:0},this.firePosition=null,this.customCursor=null,this.container=document.querySelector("#captcha-container"),this.init()}init(){this.createGameHTML(),this.createCookingItems(),this.setupEventListeners(),this.calculateFirePosition(),this.createCustomCursor(),this.showStartButton()}createGameHTML(){this.container.innerHTML=`
      <div class="cooking-game">
        <div class="game-area" id="game-area">
          <div class="game-area-inner">
          <div class="preparation-area"></div>
          <div class="fire" id="fire">
            <div class="fire-background"></div>
            <div class="fire-grates"></div>
          </div>
          </div>
        </div>
        <div class="status" id="status"></div>
      </div>
    `}createCookingItems(){this.gameArea=document.getElementById("game-area"),this.fireElement=document.getElementById("fire");const e=[{name:"Steak",icon:"steak",cookTime:8,tolerance:1},{name:"Egg",icon:"egg",cookTime:4,tolerance:.5},{name:"Chicken",icon:"chicken",cookTime:6,tolerance:1},{name:"Potato",icon:"potato",cookTime:5,tolerance:.8},{name:"Sausage",icon:"sausage",cookTime:7,tolerance:1},{name:"Naan",icon:"naan",cookTime:3,tolerance:.5}],t=60,n=(374-e.length*t)/2,i=10;e.forEach((r,o)=>{const a=document.createElement("div");a.className="cooking-item",a.id=`item-${o}`,a.innerHTML=`
        <div class="item-content">
          <div class="item-info">
            <div class="item-times">
              <span class="target-time">${r.cookTime}s</span>
              <span class="current-time">0.0s</span>
            </div>
          </div>
          <div class="asset ${r.icon}"></div>
        </div>
      `;const c=n+o*t,l=i,d={element:a,name:r.name,cookTime:r.cookTime,currentTime:0,isOnFire:!1,tolerance:r.tolerance,x:c,y:l};this.items.push(d),this.gameArea.appendChild(a),this.positionItem(d,c,l),a.addEventListener("pointerdown",u=>this.handlePointerDown(u,d))})}setupEventListeners(){document.addEventListener("pointermove",this.handlePointerMove.bind(this)),document.addEventListener("pointerup",this.handlePointerUp.bind(this)),window.addEventListener("resize",()=>{this.calculateFirePosition()}),this.container.addEventListener("pointerenter",e=>{this.customCursor&&e.pointerType!=="touch"&&(this.customCursor.style.display="block")}),this.container.addEventListener("pointerleave",e=>{this.customCursor&&e.pointerType!=="touch"&&(this.customCursor.style.display="none")})}calculateFirePosition(){if(!this.fireElement||!this.gameArea)return;const e=this.fireElement.getBoundingClientRect(),t=this.gameArea.getBoundingClientRect();this.firePosition={x:e.left+e.width/2-t.left,y:e.top+e.height/2-t.top}}startProximityChecking(){this.proximityCheckTimer&&clearInterval(this.proximityCheckTimer),this.proximityCheckTimer=window.setInterval(()=>{this.items.forEach(e=>{this.checkFireProximity(e)})},300)}positionItem(e,t,s){const n=this.gameArea.getBoundingClientRect(),i=Math.max(0,Math.min(n.width-55,t)),r=Math.max(0,Math.min(n.height-75,s));e.x=i,e.y=r,e.element.style.position="absolute",e.element.style.left=`${i}px`,e.element.style.top=`${r}px`,e.element.style.zIndex="10"}checkFireProximity(e){if(!this.gameStarted||this.gameFailed||(this.calculateFirePosition(),!this.firePosition))return;const t=this.fireElement.getBoundingClientRect(),s=this.gameArea.getBoundingClientRect(),n=t.left-s.left,i=t.right-s.left,r=t.top-s.top,o=t.bottom-s.top,a=e.x,c=e.x+50,l=e.y,d=e.y+70,u=15,g=c>n+u&&a<i-u&&d>r+u&&l<o-u,m=e.isOnFire?c>n&&a<i&&d>r&&l<o:g;m&&!e.isOnFire?this.startCooking(e):!m&&e.isOnFire&&this.stopCooking(e)}handlePointerDown(e,t){e.preventDefault(),e.pointerType==="touch"&&(document.body.style.touchAction="none"),this.draggedItem=t;const s=t.element.getBoundingClientRect();this.gameArea.getBoundingClientRect(),this.dragOffset.x=e.clientX-s.left,this.dragOffset.y=e.clientY-s.top,t.element.classList.add("dragging"),t.element.style.zIndex="1000",t.element.setPointerCapture(e.pointerId)}handlePointerMove(e){if(this.customCursor&&e.pointerType!=="touch"&&(this.customCursor.style.left=`${e.clientX}px`,this.customCursor.style.top=`${e.clientY}px`),!this.draggedItem)return;e.preventDefault();const t=this.gameArea.getBoundingClientRect(),s=e.clientX-t.left-this.dragOffset.x,n=e.clientY-t.top-this.dragOffset.y;this.positionItem(this.draggedItem,s,n)}handlePointerUp(e){this.draggedItem&&(e.pointerType==="touch"&&(document.body.style.touchAction="auto"),this.draggedItem.element.classList.remove("dragging"),this.draggedItem.element.style.zIndex="10",this.draggedItem=null)}startCooking(e){if(!this.gameStarted||this.gameFailed||e.isOnFire)return;e.isOnFire=!0,e.element.classList.add("cooking");const t=document.getElementById("sizzle-sound");t&&(t.currentTime=0,t.play().catch(s=>{console.log("Could not play sizzle sound:",s)})),e.timer=window.setInterval(()=>{e.currentTime+=.1,this.updateTimer(e),this.checkCookingStatus(e)},100),this.updateStatus(`Started cooking ${e.name}`)}stopCooking(e){if(!e.isOnFire)return;e.isOnFire=!1,e.element.classList.remove("cooking");const t=e.currentTime/e.cookTime,n=Math.abs(e.currentTime-e.cookTime)<=e.tolerance*2,i=e.currentTime<e.cookTime;if(n&&!i){const o=document.getElementById("beautiful-sound");o&&(o.currentTime=0,o.play().catch(a=>{console.log("Could not play beautiful sound:",a)}))}else if(i){const o=document.getElementById("order-up-sound");o&&(o.currentTime=0,o.play().catch(a=>{console.log("Could not play order-up sound:",a)}))}else{const o=document.getElementById("burned-sound");o&&(o.currentTime=0,o.play().catch(a=>{console.log("Could not play burned sound:",a)}))}e.timer&&(clearInterval(e.timer),e.timer=void 0);const r=Math.max(0,Math.min(1,(t-.2)/1.3));e.element.style.setProperty("--cook-intensity",r.toString()),this.checkWinCondition(e)}updateTimer(e){const t=e.element.querySelector(".current-time");t.textContent=`${e.currentTime.toFixed(1)}s`;const s=e.currentTime/e.cookTime,n=Math.max(0,Math.min(1,(s-.2)/1.3));e.element.style.setProperty("--cook-intensity",n.toString()),s<.7?t.style.color="#4CAF50":s<1.2?t.style.color="#FF9800":t.style.color="#f44336"}checkCookingStatus(e){if(e.currentTime/e.cookTime>1.5){e.element.classList.add("burnt");const s=document.getElementById("burned-sound");s&&(s.currentTime=0,s.play().catch(n=>{console.log("Could not play burned sound:",n)})),this.stopCooking(e),this.updateStatus(`Oh no! ${e.name} is burnt! ðŸ”¥ðŸ’€`)}}checkWinCondition(e){if(this.gameFailed)return;const t=Math.abs(e.currentTime-e.cookTime),s=t<=e.tolerance,n=t<=e.tolerance*2,i=e.currentTime>e.cookTime*1.5;if(s){e.element.classList.add("perfect");const c=e.element.querySelector(".current-time");c.textContent="âœ“",c.classList.add("perfect"),this.updateStatus(`Perfect! ${e.name} cooked to perfection! âœ¨`)}else i?(e.element.classList.add("burnt"),this.updateStatus(`${e.name} is burnt! ðŸ”¥ðŸ’€`)):n?(e.element.classList.add("decent"),this.updateStatus(`${e.name} is decent, but not perfect.`)):e.currentTime<e.cookTime?this.updateStatus(`${e.name} needs more time! Currently ${e.currentTime.toFixed(1)}s, target ${e.cookTime}s`):this.updateStatus(`${e.name} is overcooked! Currently ${e.currentTime.toFixed(1)}s, target ${e.cookTime}s`);let r=0,o=0,a=0;for(let c=0;c<this.items.length;c++){const l=this.items[c];l.currentTime>0&&(r++,l.element.classList.contains("perfect")?o++:l.element.classList.contains("decent")?a++:l.element.classList.contains("burnt"))}r===this.items.length&&!this.gameWon&&(this.gameWon=!0,o===this.items.length?(this.updateStatus("ðŸŽ‰ PERFECT! All items cooked to perfection! Master Chef! ðŸŽ‰"),this.celebrateWin()):o+a===this.items.length?(this.updateStatus("ðŸŽ‰ SUCCESS! Good cooking! All items are edible! ðŸŽ‰"),this.celebrateWin()):this.handleFailure())}updateStatus(e,t=!0){if(this.gameFailed)return;const s=document.getElementById("status");s.textContent=e,t&&setTimeout(()=>{s.textContent===e&&!this.gameFailed&&(s.textContent="")},3e3)}handleFailure(){this.gameFailed=!0,this.items.forEach(s=>{s.timer&&(clearInterval(s.timer),s.timer=void 0),s.isOnFire=!1,s.element.classList.remove("cooking")}),this.proximityCheckTimer&&(clearInterval(this.proximityCheckTimer),this.proximityCheckTimer=void 0),this.updateStatus("ðŸ’€ FAILED! Too many items were burnt or ruined!",!1);const e=document.createElement("button");e.textContent="Try Again",e.className="restart-button",e.addEventListener("click",()=>this.restartGame());const t=document.getElementById("status");t.appendChild(document.createElement("br")),t.appendChild(e)}restartGame(){this.gameWon=!1,this.gameFailed=!1,this.gameStarted=!1,this.items.forEach(t=>{t.currentTime=0,t.isOnFire=!1,t.element.className="cooking-item",t.element.style.setProperty("--cook-intensity","0");const s=t.element.querySelector(".current-time");s.textContent="0.0s",s.style.color="#333",s.classList.remove("perfect"),this.positionItem(t,t.x,t.y)});const e=document.getElementById("status");e.innerHTML="",this.proximityCheckTimer&&(clearInterval(this.proximityCheckTimer),this.proximityCheckTimer=void 0),this.showStartButton(),this.container.classList.remove("celebration")}celebrateWin(){this.updateStatus("ðŸŽ‰ CONGRATULATIONS! You've mastered the cooking challenge! ðŸŽ‰");const e=document.getElementById("beautiful-sound");e&&(e.currentTime=0,e.play().catch(t=>{console.log("Could not play beautiful sound:",t)})),this.container.classList.add("celebration"),setTimeout(()=>{window.top.postMessage("success","*")},2e3)}createCustomCursor(){this.customCursor=document.createElement("div"),this.customCursor.className="custom-cursor",this.customCursor.style.display="none",document.body.appendChild(this.customCursor)}showStartButton(){const e=document.getElementById("status");e.innerHTML="";const t=document.createElement("div");t.textContent="Grill the items to perfection!";const s=document.createElement("button");s.textContent="Start Cooking",s.className="start-button",s.addEventListener("click",()=>this.startGame()),e.appendChild(t),e.appendChild(s)}startGame(){this.gameStarted=!0;const e=document.getElementById("status");e.innerHTML="";const t=document.getElementById("bg-music");t&&(t.volume=.4,t.play().catch(s=>{console.log("Could not play background music:",s)})),this.startProximityChecking(),this.updateStatus("Grill the items to perfection",!1)}}document.addEventListener("DOMContentLoaded",()=>{new f});
